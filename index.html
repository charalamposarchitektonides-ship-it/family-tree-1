<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vertical Family Tree</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 800px;
    margin: auto;
    background: #f9f9f9;
    color: #333;
  }
  h1 {
    text-align: center;
  }
  /* Container for the tree */
  #tree-container {
    display: flex;
    justify-content: center;
    margin-top: 30px;
  }
  /* Vertical tree wrapper */
  .tree-vertical {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  /* Each person box */
  .person-box {
    background: #fff;
    border: 1px solid #007BFF;
    border-radius: 8px;
    padding: 10px 15px;
    margin: 10px 0;
    min-width: 120px;
    text-align: center;
    position: relative;
  }
  /* Buttons below each person */
  .buttons {
    margin-top: 8px;
  }
  button {
    margin: 0 5px;
    padding: 5px 10px;
    font-size: 0.9em;
    cursor: pointer;
    border-radius: 4px;
    border: 1px solid #007BFF;
    background-color: #007BFF;
    color: white;
    transition: background-color 0.2s;
  }
  button:hover {
    background-color: #0056b3;
  }
  /* Connector lines between generations */
  .children-container {
    display: flex;
    justify-content: center;
    margin-top: 10px;
    position: relative;
    padding-left: 20px;
    padding-right: 20px;
  }
  /* Horizontal line connecting children boxes */
  .children-container::before {
    content: "";
    position: absolute;
    top: 0;
    left: 10px;
    right: 10px;
    height: 2px;
    background: #007BFF;
  }
  /* Vertical line connecting parent box to horizontal line */
  .connector {
    position: absolute;
    top: -10px;
    width: 2px;
    height: 10px;
    background: #007BFF;
    left: 50%;
    transform: translateX(-50%);
  }
</style>
</head>
<body>
  <h1>Vertical Family Tree</h1>
  <div id="tree-container"></div>

<script>
// Person class
class Person {
  constructor(name) {
    this.name = name;
    this.parents = [];
    this.children = [];
  }
}

const rootPerson = new Person("You");
const treeContainer = document.getElementById("tree-container");

// Render tree vertically (parents above children)
function renderTree() {
  treeContainer.innerHTML = "";

  function createPersonNode(person, visited = new Set()) {
    if (visited.has(person)) {
      // Avoid infinite loops
      const div = document.createElement("div");
      div.className = "person-box";
      div.textContent = person.name + " (shown)";
      return div;
    }
    visited.add(person);

    const container = document.createElement("div");
    container.style.display = "flex";
    container.style.flexDirection = "column";
    container.style.alignItems = "center";

    // Person box
    const personBox = document.createElement("div");
    personBox.className = "person-box";
    personBox.textContent = person.name;

    // Buttons container
    const buttonsDiv = document.createElement("div");
    buttonsDiv.className = "buttons";

    // Add Parent button
    const addParentBtn = document.createElement("button");
    addParentBtn.textContent = "Add Parent";
    addParentBtn.onclick = () => {
      if (person.parents.length >= 2) {
        alert("This person already has two parents.");
        return;
      }
      const parentName = prompt("Enter parent's name:");
      if (parentName && parentName.trim()) {
        const parent = new Person(parentName.trim());
        person.parents.push(parent);
        parent.children.push(person);
        renderTree();
      } else {
        alert("Invalid name.");
      }
    };
    buttonsDiv.appendChild(addParentBtn);

    // Add Child button
    const addChildBtn = document.createElement("button");
    addChildBtn.textContent = "Add Child";
    addChildBtn.onclick = () => {
      const childName = prompt("Enter child's name:");
      if (childName && childName.trim()) {
        const child = new Person(childName.trim());
        person.children.push(child);
        child.parents.push(person);
        renderTree();
      } else {
        alert("Invalid name.");
      }
    };
    buttonsDiv.appendChild(addChildBtn);

    personBox.appendChild(buttonsDiv);
    container.appendChild(personBox);

    // Show parents above person (names only)
    if (person.parents.length > 0) {
      const parentsDiv = document.createElement("div");
      parentsDiv.style.marginBottom = "10px";
      parentsDiv.style.fontStyle = "italic";
      parentsDiv.textContent = "Parents: " + person.parents.map(p => p.name).join(", ");
      container.insertBefore(parentsDiv, personBox);
    }

    // Show children below person
    if (person.children.length > 0) {
      const childrenContainer = document.createElement("div");
      childrenContainer.className = "children-container";

      for (const child of person.children) {
        const childNode = createPersonNode(child, visited);
        childNode.style.margin = "0 10px";
        childrenContainer.appendChild(childNode);

        // Add vertical connector line from parent box to horizontal line
        const connectorLine = document.createElement("div");
        connectorLine.className = "connector";
        childNode.style.position = "relative";
        childNode.appendChild(connectorLine);
      }
      container.appendChild(childrenContainer);
    }

    return container;
  }

  const rootNode = createPersonNode(rootPerson);
  rootNode.classList.add("tree-vertical");
  treeContainer.appendChild(rootNode);
}

renderTree();
</script>
</body>
</html>
